<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vier gewinnt — Kurzdokumentation</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="hero">
    <div class="hero-inner">
      <h1>Vier gewinnt - Kurzdokumentation</h1>
      <p class="subtitle">Team: Myriam Schaad und Colin Dubuis</p>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>Funktionsübersicht</h2>
      <p>Die Anwendung bietet folgende Kernfunktionen, die durch den Custom Hook <code>useConnectFour</code> gesteuert werden:</p>
      <table>
        <thead>
          <tr>
            <th>Funktion</th>
            <th>Technische Beschreibung</th>
          </tr>
        </thead>
        <tbody>
           <tr>
            <td><code>dropPiece(colIndex)</code></td>
            <td>
              Kern-Spielzug: Implementiert die <strong>Gravity Logic</strong> (Suche nach tiefstem freien Slot in Spalte). Aktualisiert das Board immutabel, pusht den alten State in die History und triggert <code>checkWin</code>.
            </td>
          </tr>
          <tr>
            <td><code>checkWin(board, player)</code></td>
            <td>
              Algorithmus zur Gewinnermittlung. Scannt das Grid mittels "Sliding Window" auf 4 zusammenhängende Tokens (Horizontal, Vertikal, Diagonal).
            </td>
          </tr>
          <tr>
            <td><code>undo()</code></td>
            <td>
              Entfernt den aktuellen State und stellt den vorletzten Zustand aus dem <code>history</code>-Array wieder her (LIFO-Prinzip). Setzt bei leerer History auf Initialzustand.
            </td>
          </tr>
          <tr>
            <td><code>resetGame()</code></td>
            <td>
              Setzt <code>gameState</code> auf <code>INITIAL_STATE</code> zurück und leert den gesamten History-Stack. Bereinigt zudem Fehlermeldungen.
            </td>
          </tr>
          <tr>
            <td><code>saveGame()</code></td>
            <td>
              Persistenz-Wrapper: Delegiert das Speichern an <code>StorageService.save</code>. Verarbeitet das Resultat und gibt Feedback (Alert bei Erfolg, Error-State bei Fehlschlag).
            </td>
          </tr>
          <tr>
            <td><code>loadGame()</code></td>
            <td>
              State Hydration: Lädt Daten via <code>StorageService.load</code>. Bei Erfolg werden State und History komplett überschrieben, bei Fehler wird <code>meta.error</code> gesetzt.
            </td>
          </tr>
           <tr>
            <td><code>doku(url)</code></td>
            <td>
              Öffnet diese Dokumentation in einem neuen Tab. Nutzt <code>noopener,noreferrer</code> aus Sicherheitsgründen.
            </td>
          </tr>
        </tbody>
      </table>

      <h3>UI Helper (ConnectFour.jsx)</h3>
      <table>
        <thead>
          <tr>
            <th>Funktion</th>
            <th>Technische Beschreibung</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>getStatusMessage()</code></td>
            <td>Evaluiert boolesche Flags (<code>gameOver</code>) und Enum-Werte (<code>winner</code>), um den Spielstatus textuell zurückzugeben.</td>
          </tr>
          <tr>
            <td><code>getStatusColor()</code></td>
            <td>Mapping-Funktion, die basierend auf dem aktiven Spieler/Gewinner den CSS-Farbstring ("blue"/"red") für die UI zurückgibt.</td>
          </tr>
        </tbody>
      </table>
    </section>
    
    <section class="card">
      <h2>Wichtige Implementierungsdetails</h2>
      <h3>Technologie-Stack</h3>
    <p>Das Projekt wurde mit folgenden Technologien umgesetzt:</p>
    <ul class="little">
        <li><strong>Framework:</strong> React (v19)</li>
        <li><strong>Build Tool:</strong> Vite</li>
        <li><strong>Sprache:</strong> JavaScript (ES6+) / JSX</li>
        <li><strong>Styling:</strong> CSS3</li>
    </ul>

    <h3>Architektur & Code-Struktur</h3>
    <p>Die Anwendung folgt dem Prinzip der "Separation of Concerns" (Trennung der Zuständigkeiten):</p>
    
    <ul>
        <li><strong>View (<code>ConnectFour.jsx</code>):</strong> 
            Verantwortlich für die Darstellung der Benutzeroberfläche. Das Board wird mittels CSS Grid (7 Spalten x 6 Zeilen) gerendert. Es enthält keine Spielelogik, sondern konsumiert diese nur.
        </li>
        <li><strong>Logic (<code>useConnectFour.js</code>):</strong> 
            Ein Custom Hook, der den kompletten <code>useState</code> für das Board, den aktuellen Spieler und den Spielstatus (Game Over) verwaltet. 
        </li>
        <li><strong>Datenhaltung:</strong> 
            Das Spielfeld wird als 2D-Array (6x7) repräsentiert. Ein <code>History</code>-Array speichert vergangene Zustände für die Undo-Funktion.
        </li>
        <li><strong>Storage Service:</strong> 
            Ein integrierter Service kapselt die Zugriffe auf den <code>localStorage</code>, um Speicher- und Ladefehler abzufangen (Error Handling).
        </li>
    </ul>
    <br>
    <h2>Besonderheiten</h2>
      <ul>
        <li><strong>Animationen:</strong> CSS Keyframes (<code>@keyframes drop</code>) sorgen für eine flüssige Animation beim Einwerfen der Steine.</li>
        <li><strong>Responsivität:</strong> Das Layout passt sich mittels Media Queries an mobile Endgeräte an, wobei die Anordnung der Steuerelemente und die Grösse des Boards optimiert werden.</li>
      </ul>
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2024 Myriam Schaad & Colin Dubuis | ZHAW School of Engineering</p>
  </footer>
</body>
</html>
